# Midnight Wallet API

Definition of the Midnight Wallet set of interfaces.

## Structure

This is a plain [yarn](https://yarnpkg.com) project that declares a set of [TypeScript](https://www.typescriptlang.org/)
interfaces. All of them can be found in `src/` directory.

## Development setup

The tools with the corresponding versions used to build the code are listed in the [.tool-versions](.tool-versions) file.

You can use [asdf](https://asdf-vm.com) and just run `asdf install` to get the correct versions.

Another option is to use [Nix](https://nixos.org). This project provides a [flake](flake.nix) with a devshell definition.

Configure Yarn with your credentials by following the [Authentication setup document](https://input-output.atlassian.net/wiki/spaces/MN/pages/3696001685/Authentication+setup#Configure-Yarn) and setting the `NODE_AUTH_TOKEN` env variable. `direnv` is a recommended way to easily achieve this. 

## Lint

```shell
yarn eslint
```

## Build

Remember to install the dependencies after cloning:
```shell
yarn install
```

Build:
```shell
yarn build
```

The generated TypeScript definitions and JavaScript code are written to `dist/` directory.

## Contributing

All new features must branch off the default branch `main`.

## Release a new version

Please read our [git workflow](https://input-output.atlassian.net/wiki/spaces/MN/pages/3378086090/Git+Workflow)
for how to branch and tag releases.

In order to release a new version, the version in `package.json` should be bumped.

After that, use the [Releases](https://github.com/input-output-hk/midnight-wallet-api/releases/new) 
feature from GitHub to create a tag with a name following the pattern `vX.Y.Z`.
Cicero will detect it and automatically build and publish the new version.


## Test

This is an interface only, without implementations, so no tests are provided.
The CI will only try to lint and build the code to verify its correctness.

## Documentation

To generate documentation files in `docs` folder:

```shell
yarn run build:markdown-docs
```
